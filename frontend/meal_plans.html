<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<<<<<<< Updated upstream
    <title>Meal Plans - Recipe App</title>
    <link rel="stylesheet" href="styles.css">
=======
    <title>Meal Plans - Recipe Food App</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .meal-plan-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .meal-plan-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 20px;
            margin-top: 20px;
        }

        .day-column {
            background: #fff;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .day-column h3 {
            text-align: center;
            margin-bottom: 15px;
            color: #333;
        }

        .meal-slot {
            background: #f5f5f5;
            border-radius: 4px;
            padding: 10px;
            margin-bottom: 10px;
        }

        .meal-slot h4 {
            margin: 0 0 5px 0;
            color: #666;
        }

        .meal-slot p {
            margin: 0;
            font-size: 0.9em;
        }

        .meal-slot .actions {
            display: flex;
            gap: 5px;
            margin-top: 5px;
        }

        .meal-slot button {
            padding: 3px 8px;
            font-size: 0.8em;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 3px;
            cursor: pointer;
        }

        .meal-slot button.delete {
            background: #f44336;
        }

        .add-meal-form {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .add-meal-form select,
        .add-meal-form input {
            padding: 8px;
            margin: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .add-meal-form button {
            padding: 8px 16px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
    </style>
>>>>>>> Stashed changes
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
<<<<<<< Updated upstream
        <a href="index.html" class="nav-brand">Bite Board</a>
=======
        <div class="nav-brand">Recipe Food App</div>
>>>>>>> Stashed changes
        <div class="nav-links">
            <a href="index.html">Home</a>
            <a href="favorites.html">My Favorites</a>
            <a href="journal.html">Recipe Journal</a>
            <a href="meal_plans.html" class="active">Meal Plans</a>
        </div>
    </nav>

<<<<<<< Updated upstream
    <div id="loginStatus" class="login-status">
        <span id="userDisplay"></span>
        <button type="button" onclick="logout()" class="logout-button">Logout</button>
    </div>

    <div class="container">
        <h1>My Meal Plan</h1>
        <p class="subtitle">Plan your meals for the entire week! Choose from your favorite recipes or journal entries to create a balanced meal plan. Organize breakfast, lunch, and dinner for each day, and make your meal preparation stress-free and delicious.</p>
        
        <div class="meal-plan-container">
            <h2>Meal Plan</h2>
            <div class="add-meal-form">
                <select id="recipeSelect">
                    <option value="">Select a recipe...</option>
                </select>
                <select id="daySelect">
                    <option value="Monday">Monday</option>
                    <option value="Tuesday">Tuesday</option>
                    <option value="Wednesday">Wednesday</option>
                    <option value="Thursday">Thursday</option>
                    <option value="Friday">Friday</option>
                    <option value="Saturday">Saturday</option>
                    <option value="Sunday">Sunday</option>
                </select>
                <select id="mealTypeSelect">
                    <option value="Breakfast">Breakfast</option>
                    <option value="Lunch">Lunch</option>
                    <option value="Dinner">Dinner</option>
                </select>
                <button onclick="addMealToPlan()">Add to Plan</button>
            </div>
            <div id="message" class="message" style="display: none;"></div>
            <div id="mealPlanContainer" class="meal-plan-grid">
                <!-- Meal slots will be populated here -->
=======
    <div class="meal-plan-container">
        <h1>Meal Plans</h1>
        
        <div class="add-meal-form">
            <h2>Add Meal to Plan</h2>
            <select id="recipeSelect">
                <option value="">Select a recipe...</option>
            </select>
            <select id="daySelect">
                <option value="Monday">Monday</option>
                <option value="Tuesday">Tuesday</option>
                <option value="Wednesday">Wednesday</option>
                <option value="Thursday">Thursday</option>
                <option value="Friday">Friday</option>
                <option value="Saturday">Saturday</option>
                <option value="Sunday">Sunday</option>
            </select>
            <select id="mealTypeSelect">
                <option value="Breakfast">Breakfast</option>
                <option value="Lunch">Lunch</option>
                <option value="Dinner">Dinner</option>
            </select>
            <button onclick="addMealToPlan()">Add to Plan</button>
        </div>

        <div class="meal-plan-grid">
            <div class="day-column" id="Monday">
                <h3>Monday</h3>
            </div>
            <div class="day-column" id="Tuesday">
                <h3>Tuesday</h3>
            </div>
            <div class="day-column" id="Wednesday">
                <h3>Wednesday</h3>
            </div>
            <div class="day-column" id="Thursday">
                <h3>Thursday</h3>
            </div>
            <div class="day-column" id="Friday">
                <h3>Friday</h3>
            </div>
            <div class="day-column" id="Saturday">
                <h3>Saturday</h3>
            </div>
            <div class="day-column" id="Sunday">
                <h3>Sunday</h3>
>>>>>>> Stashed changes
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
<<<<<<< Updated upstream
        // Load recipes and meal plans when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            loadRecipes();
            loadMealPlans();
        });
=======
        // Load meal plans when the page loads
        window.addEventListener('load', () => {
            loadMealPlans();
            loadRecipes();
        });

        // Load all recipes for the dropdown
        function loadRecipes() {
            fetch('http://localhost:8000/api/recipes.php?action=random')
                .then(response => response.json())
                .then(recipes => {
                    const select = document.getElementById('recipeSelect');
                    recipes.forEach(recipe => {
                        const option = document.createElement('option');
                        option.value = recipe.id;
                        option.textContent = recipe.name;
                        select.appendChild(option);
                    });
                })
                .catch(error => console.error('Error loading recipes:', error));
        }

        // Load meal plans for the current user
        function loadMealPlans() {
            const currentUser = localStorage.getItem('currentUser');
            if (!currentUser) {
                alert('Please log in to view meal plans');
                return;
            }

            fetch(`http://localhost:8000/api/meal_plans.php?action=get&user_id=1`)
                .then(response => response.json())
                .then(mealPlans => {
                    // Clear existing meal slots
                    document.querySelectorAll('.day-column').forEach(column => {
                        column.innerHTML = `<h3>${column.id}</h3>`;
                    });

                    // Add meal plans to the grid
                    mealPlans.forEach(plan => {
                        const dayColumn = document.getElementById(plan.day);
                        const mealSlot = document.createElement('div');
                        mealSlot.className = 'meal-slot';
                        mealSlot.innerHTML = `
                            <h4>${plan.meal_type}</h4>
                            <p>${plan.recipe_name}</p>
                            <div class="actions">
                                <button onclick="moveMeal(${plan.id})">Move</button>
                                <button class="delete" onclick="deleteMeal(${plan.id})">Delete</button>
                            </div>
                        `;
                        dayColumn.appendChild(mealSlot);
                    });
                })
                .catch(error => console.error('Error loading meal plans:', error));
        }

        // Add a meal to the plan
        function addMealToPlan() {
            const recipeId = document.getElementById('recipeSelect').value;
            const day = document.getElementById('daySelect').value;
            const mealType = document.getElementById('mealTypeSelect').value;

            if (!recipeId) {
                alert('Please select a recipe');
                return;
            }

            const currentUser = localStorage.getItem('currentUser');
            if (!currentUser) {
                alert('Please log in to add meals to your plan');
                return;
            }

            fetch('http://localhost:8000/api/meal_plans.php?action=add', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    user_id: 1,
                    recipe_id: recipeId,
                    day: day,
                    meal_type: mealType
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.error) {
                    alert(data.error);
                } else {
                    alert('Meal added to plan successfully');
                    loadMealPlans();
                }
            })
            .catch(error => console.error('Error adding meal to plan:', error));
        }

        // Move a meal to a different day
        function moveMeal(mealId) {
            const newDay = prompt('Enter new day (Monday-Sunday):');
            const newMealType = prompt('Enter new meal type (Breakfast/Lunch/Dinner):');

            if (!newDay || !newMealType) return;

            fetch('http://localhost:8000/api/meal_plans.php?action=update', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    id: mealId,
                    day: newDay,
                    meal_type: newMealType
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.error) {
                    alert(data.error);
                } else {
                    alert('Meal moved successfully');
                    loadMealPlans();
                }
            })
            .catch(error => console.error('Error moving meal:', error));
        }

        // Delete a meal from the plan
        function deleteMeal(mealId) {
            if (!confirm('Are you sure you want to delete this meal?')) return;

            fetch(`http://localhost:8000/api/meal_plans.php?action=delete&id=${mealId}`)
                .then(response => response.json())
                .then(data => {
                    if (data.error) {
                        alert(data.error);
                    } else {
                        alert('Meal deleted successfully');
                        loadMealPlans();
                    }
                })
                .catch(error => console.error('Error deleting meal:', error));
        }
>>>>>>> Stashed changes
    </script>
</body>
</html> 